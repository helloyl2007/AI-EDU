import{_ as G,r as _,G as h,a as J,b as z,d as s,e as d,f as l,g as i,w as c,m as R,t as V,l as Z,Z as H,F as b,j as $,p as x,q as E,i as S,J as B,k as K,E as L}from"./index-3f8b9c66.js";const O={class:"voice-selector"},Q={class:"voice-selection"},W={class:"voice-categories"},X={class:"voice-category"},Y={class:"voice-grid"},ee=["onClick"],le={class:"voice-name"},ae={class:"voice-actions"},te={class:"voice-category"},oe={class:"voice-grid"},se=["onClick"],ie={class:"voice-name"},ce={class:"voice-actions"},ne={class:"voice-category"},ue={class:"voice-grid"},de=["onClick"],re={class:"voice-name"},ve={class:"voice-actions"},_e={__name:"VoiceSelector",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(m,{emit:j}){const A="http://edu.xiaojuai.com:8100",q=m,N=j,k=_(!1),r=_(!1),o=_(""),n=_(!1),u=_(null),f=[{label:"小燕",value:"zhiyan_emo",category:"female"},{label:"小美",value:"zhimao",category:"female"},{label:"知哥",value:"zhishuo",category:"male"},{label:"艾硕",value:"aishuo",category:"male"},{label:"知贝",value:"zhibei_emo",category:"child"},{label:"杰力豆",value:"jielidou",category:"child"},{label:"青青",value:"qingqing",category:"child"}],U=h(()=>f.filter(a=>a.category==="female")),D=h(()=>f.filter(a=>a.category==="male")),F=h(()=>f.filter(a=>a.category==="child")),I=h(()=>{const a=f.find(t=>t.value===q.modelValue);return a?a.label:""});function C(a){N("update:modelValue",a.value),k.value=!1}async function w(a){if(n.value&&o.value===a){p();return}try{r.value=!0,o.value=a,P();const t=await K.post(`${A}/api/tts/preview`,{text:"同学们好，欢迎来到我的课堂",voice:a});t.data.status==="success"?(u.value.src=`${A}${t.data.audio_url}`,u.value.load(),await u.value.play(),n.value=!0):L.error("生成试听失败")}catch(t){console.error("语音试听失败:",t),L.error("语音试听失败")}finally{r.value=!1}}function p(){P(),n.value=!1}function P(){u.value&&(u.value.pause(),u.value.currentTime=0),n.value=!1}function M(){n.value=!1,o.value=""}return J(()=>{P()}),(a,t)=>{const g=z("el-icon"),y=z("el-button"),T=z("el-popover");return s(),d(b,null,[l("div",O,[i(T,{visible:k.value,"onUpdate:visible":t[0]||(t[0]=e=>k.value=e),placement:"bottom-start",width:520,trigger:"click","popper-class":"voice-popover"},{reference:c(()=>[i(y,{class:"voice-select-button",size:"small"},{default:c(()=>[R(V(I.value||"请选择语音")+" ",1),i(g,{class:"el-icon--right"},{default:c(()=>[i(Z(H))]),_:1})]),_:1})]),default:c(()=>[l("div",Q,[l("div",W,[l("div",X,[t[1]||(t[1]=l("h4",{class:"category-title"},"女声",-1)),l("div",Y,[(s(!0),d(b,null,$(U.value,e=>(s(),d("div",{key:e.value,class:x(["voice-item",{active:m.modelValue===e.value}]),onClick:v=>C(e)},[l("div",le,V(e.label),1),l("div",ae,[i(y,{type:"danger",size:"small",circle:"",loading:r.value&&o.value===e.value,onClick:E(v=>o.value===e.value?p():w(e.value),["stop"])},{default:c(()=>[i(g,null,{default:c(()=>[(s(),S(B(o.value===e.value&&n.value?"VideoPause":"VideoPlay")))]),_:2},1024)]),_:2},1032,["loading","onClick"])])],10,ee))),128))])]),l("div",te,[t[2]||(t[2]=l("h4",{class:"category-title"},"男声",-1)),l("div",oe,[(s(!0),d(b,null,$(D.value,e=>(s(),d("div",{key:e.value,class:x(["voice-item",{active:m.modelValue===e.value}]),onClick:v=>C(e)},[l("div",ie,V(e.label),1),l("div",ce,[i(y,{type:"danger",size:"small",circle:"",loading:r.value&&o.value===e.value,onClick:E(v=>o.value===e.value?p():w(e.value),["stop"])},{default:c(()=>[i(g,null,{default:c(()=>[(s(),S(B(o.value===e.value&&n.value?"VideoPause":"VideoPlay")))]),_:2},1024)]),_:2},1032,["loading","onClick"])])],10,se))),128))])]),l("div",ne,[t[3]||(t[3]=l("h4",{class:"category-title"},"童声",-1)),l("div",ue,[(s(!0),d(b,null,$(F.value,e=>(s(),d("div",{key:e.value,class:x(["voice-item",{active:m.modelValue===e.value}]),onClick:v=>C(e)},[l("div",re,V(e.label),1),l("div",ve,[i(y,{type:"danger",size:"small",circle:"",loading:r.value&&o.value===e.value,onClick:E(v=>o.value===e.value?p():w(e.value),["stop"])},{default:c(()=>[i(g,null,{default:c(()=>[(s(),S(B(o.value===e.value&&n.value?"VideoPause":"VideoPlay")))]),_:2},1024)]),_:2},1032,["loading","onClick"])])],10,de))),128))])])])])]),_:1},8,["visible"])]),l("audio",{ref_key:"audioPlayer",ref:u,onEnded:M},null,544)],64)}}},fe=G(_e,[["__scopeId","data-v-b44ffa2e"]]);export{fe as V};
//# sourceMappingURL=VoiceSelector-1fed147c.js.map
